<div class="narrow-page">
  <mat-card *ngIf="!user" class="alert warning">
    <h4>
      <fa-icon name="exclamation-circle" class="margin-right-xxs"></fa-icon>
      You are not logged in.
    </h4>
  </mat-card>

  <mat-spinner *ngIf="user && !ready" mode="indeterminate" class="full-page"></mat-spinner>

  <div *ngIf="user && ready && !errorGotten">
    <div *ngIf="statuses && statuses.length">
      <mat-card class="table-filter">
        <mat-form-field class="full-width">
          <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter by name" />
        </mat-form-field>
      </mat-card>

      <mat-card class="margin-top-s">
        <h3>
          Show / Go to
        </h3>

        <div class="statuses-wrapper">
          <span *ngFor="let status of statuses" class="status-wrapper">
            <div *ngIf="hasDataOfStatus(status.value)">
              <mat-checkbox [(ngModel)]="status.shown">
                {{ status.label }}
              </mat-checkbox>

              <a href="{{ '/user-list#' + status.value }}" class="capitalize">
                <fa-icon name="arrow-down" class="go-to-icon"></fa-icon>
              </a>
            </div>
          </span>
        </div>
      </mat-card>

      <div *ngFor="let status of statuses">
        <div *ngIf="status.shown && hasDataOfStatus(status.value)" class="status-table-wrapper">
          <mt-user-list-table
            [tableStatus]="status"
            [tableData]="statusObjects[status.value]"
            [favouriteIDs]="favouriteIDs"
            [filter]="filter"
            (onEntryUpdate)="onEntryUpdate($event)"
          >
          </mt-user-list-table>
        </div>
      </div>

      <div class="padding-top-xs padding-bottom-m">
        <h3>
          Settings
        </h3>

        <mat-slide-toggle [checked]="reloadOnUpdate" (change)="reloadOnUpdate = !reloadOnUpdate">
          Reload on update
        </mat-slide-toggle>
      </div>

      <mt-genres-overview [genreStatsList]="user.stats.favouredGenresOverview"> </mt-genres-overview>
    </div>

    <mat-card *ngIf="ready && !error && (!statuses || !statuses.length)">
      <h4>
        <fa-icon name="exclamation-circle" class="margin-right-xxs"></fa-icon>
        You haven't added any entries yet.
      </h4>
    </mat-card>
  </div>

  <mat-card *ngIf="error" class="error">
    <h4>
      <fa-icon name="exclamation-circle" class="margin-right-xxs"></fa-icon>
      {{ error }}
    </h4>
  </mat-card>
</div>
